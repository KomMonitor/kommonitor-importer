definitions:

  Import_SpatialUnitPOSTInputType:
    type: "object"
    required:
      - spatialUnitLevel
      - metadata
      - nextLowerHierarchyLevel
      - nextUpperHierarchyLevel
      - jsonSchema
      - dataSource
      - propertyMapping
    properties:
      spatialUnitLevel:
        type: string
        description: the name and identifier of the spatial unit level the features apply to
      periodOfValidity:
        $ref: "#/definitions/PeriodOfValidityType"
      metadata:
        $ref: "#/definitions/CommonMetadataType"
      nextLowerHierarchyLevel:
        type: string
        description: the identifier/name of the spatial unit level that contains the features of the nearest lower hierarchy level
      nextUpperHierarchyLevel:
        type: string
        description: the identifier/name of the spatial unit level that contains the features of the nearest upper hierarchy level
      jsonSchema:
            type: "string"
            description: "a JSON schema as string that defines the data model for this dataset. It can be used to validate the geoJsonString property."
      dataSource:
        $ref: "#/definitions/ImportDataSourceType"
        description: "Contains information for retrieving Spatial Units from an underlying datasource"
      propertyMapping:
        $ref: "#/definitions/SpatialUnitPropertyMappingType"
        description: "Definitions for mapping datasource properties to Spatial Unit properties"

  Import_SpatialUnitPUTInputType:
    type: "object"
    required:
      - periodOfValidity
      - dataSource
    properties:
      periodOfValidity:
        $ref: "#/definitions/PeriodOfValidityType"
      dataSource:
        $ref: "#/definitions/ImportDataSourceType"

  Import_SpatialUnitOverviewType:
    type: "object"
    required:
      - spatialUnitId
      - spatialUnitLevel
      - metadata
      - nextLowerHierarchyLevel
      - nextUpperHierarchyLevel
      - availablePeriodsOfValidity
      - wmsUrl
      - wfsUrl
    properties:
      spatialUnitId:
        type: string
        description: the unique identifier of the spatial unit level the features apply to
      spatialUnitLevel:
        type: string
        description: the name of the spatial unit level the features apply to
      metadata:
        $ref: "#/definitions/CommonMetadataType"
      nextLowerHierarchyLevel:
        type: string
        description: the identifier/name of the spatial unit level that contains the features of the nearest lower hierarchy level
      nextUpperHierarchyLevel:
        type: string
        description: the identifier/name of the spatial unit level that contains the features of the nearest upper hierarchy level
      availablePeriodsOfValidity:
        $ref: "#/definitions/AvailablePeriodsOfValidityType"
      wmsUrl:
        type: string
        description: the URL of a running WMS instance serving the spatial features of the associated dataset
      wfsUrl:
        type: string
        description: the URL of a running WFS instance serving the spatial features of the associated dataset

  Import_GeoresourcePOSTInputType:
    type: "object"
    required:
      - datasetName
      - metadata
      - applicableTopics
      - jsonSchema
      - dataSource
      - propertyMapping
    properties:
      datasetName:
        type: string
        description: the meaningful name of the dataset
      periodOfValidity:
        $ref: "#/definitions/PeriodOfValidityType"
      metadata:
        $ref: "#/definitions/CommonMetadataType"
      allowedRoles:
        type: array
        description: list of role identifiers that have read access rights for this dataset
        items:
          type: string
      applicableTopics:
        type: array
        description: "array of thematic categories for which the dataset is applicable. Note that the used topicName has to be defined under /topics"
        items:
          type: string
      isPOI:
        type: boolean
        description: boolean value indicating if the dataset contains points of interest
        default: false
      poiSymbolBootstrap3Name:
        type: string
        description: If georesource is a POI then custom POI marker symbol can be set by specifying the name of a Bootstrap 3 glyphicon symbol (i.e. "home" for a home symbol or "education" for a students hat symbol)
      poiMarkerColor:
        type: string
        description: If georesource is a POI then custom POI marker color can be set by specifying one of the following color names
        enum:
          - white
          - red
          - orange
          - beige
          - green
          - blue
          - purple
          - pink
          - gray
          - black
      poiSymbolColor:
        type: string
        description: If georesource is a POI then custom POI symbol color can be set by specifying one of the following color names
        enum:
          - white
          - red
          - orange
          - beige
          - green
          - blue
          - purple
          - pink
          - gray
          - black
      jsonSchema:
            type: "string"
            description: "a JSON schema as string that defines the data model for this dataset. It can be used to validate the geoJsonString property."
      dataSource:
        $ref: "#/definitions/ImportDataSourceType"
      propertyMapping:
        $ref: "#/definitions/GeoresourcePropertyMappingType"
        description: "Definitions for mapping datasource properties to Georesource properties"

  Import_GeoresourcePUTInputType:
    type: "object"
    required:
      - periodOfValidity
      - dataSource
    properties:
      periodOfValidity:
        $ref: "#/definitions/PeriodOfValidityType"
      dataSource:
        $ref: "#/definitions/ImportDataSourceType"

  Import_GeoresourceOverviewType:
    type: "object"
    required:
      - datasetName
      - georesourceId
      - metadata
      - availablePeriodsOfValidity
      - applicableTopics
      - isPOI
      - wmsUrl
      - wfsUrl
    properties:
      datasetName:
        type: string
        description: the meaningful name of the dataset
      georesourceId:
        type: string
        description: the unique identifier of the dataset
      metadata:
        $ref: "#/definitions/CommonMetadataType"
      availablePeriodsOfValidity:
        $ref: "#/definitions/AvailablePeriodsOfValidityType"
      applicableTopics:
        type: array
        description: "array of thematic categories for which the dataset is applicable. Note that the used topicName has to be defined under /topics"
        items:
          type: string
      allowedRoles:
        type: array
        description: list of role identifiers that have read access rights for this dataset
        items:
          type: string
      isPOI:
        type: boolean
        description: boolean value indicating if the dataset contains points of interest
      poiSymbolBootstrap3Name:
        type: string
        description: If georesource is a POI then custom POI marker symbol can be set by specifying the name of a Bootstrap 3 glyphicon symbol (i.e. "home" for a home symbol or "education" for a students hat symbol)
      poiMarkerColor:
        type: string
        description: If georesource is a POI then custom POI marker color can be set by specifying one of the following color names
        enum:
          - white
          - red
          - orange
          - beige
          - green
          - blue
          - purple
          - pink
          - gray
          - black
      poiSymbolColor:
        type: string
        description: If georesource is a POI then custom POI symbol color can be set by specifying one of the following color names
        enum:
          - white
          - red
          - orange
          - beige
          - green
          - blue
          - purple
          - pink
          - gray
          - black
      wmsUrl:
        type: string
        description: the URL of a running WMS instance serving the spatial features of the associated dataset
      wfsUrl:
        type: string
        description: the URL of a running WFS instance serving the spatial features of the associated dataset

  CommonMetadataType:
    type: object
    required:
      - description
      - sridEPSG
      - datasource
      - contact
      - updateInterval
    properties:
      description:
        type: string
        description: description of the dataset
      sridEPSG:
        type: number
        format: int32
        description: the coordinate reference system of the dataset as EPSG code
      datasource:
        type: string
        description: information about the origin/source of the dataset
      databasis:
        type: string
        description: information about data used as a basis to generate the dataset
      note:
        type: string
        description: an optional note with background information about the dataset
      literature:
        type: string
        description: an optional hint to literature about the dataset (e.g. URL or book/article name)
      contact:
        type: string
        description: contact details where additional information can be achieved
      lastUpdate:
        type: string
        format: date
        description: a timestamp representing the lastUpdate according to ISO 8601 (e.g. 2018-01-30)
      updateInterval:
        type: string
        enum:
          - "ARBITRARY"
          - "MONTHLY"
          - "QUARTERLY"
          - "HALF_YEARLY"
          - "YEARLY"

  PeriodOfValidityType:
    type: object
    description: definition of the period of validity of a certain dataset
    required:
      - startDate
    properties:
      startDate:
        type: string
        format: date
        description: a timestamp representing the starting date according to ISO 8601 (e.g. 2018-01-30)
      endDate:
        type: string
        format: date
        description: an optional timestamp representing the ending date according to ISO 8601 (e.g. 2018-01-30). The parameter can be omitted, if the end date is unknown.

  AvailablePeriodsOfValidityType:
    type: array
    description: "array of periods of validity, each consisting of a start and end date"
    items:
      $ref: "#/definitions/PeriodOfValidityType"

  IndicatorReferenceType:
    type: object
    description: a reference to another indicator, e.g. a sub-indicator that is used to compute the main indicator
    required:
      - referencedIndicatorId
      - referencedIndicatorName
      - referencedIndicatorDescription
    properties:
      referencedIndicatorId:
        type: string
        description: unique identifier of the referenced indicator
      referencedIndicatorName:
        type: string
        description: the meaningful name of the referenced indicator
      referencedIndicatorDescription:
        type: string
        description: a meaningful description of how the referenced indicator is related to the main indicator

  GeoresourceReferenceType:
    type: object
    description: a reference to georesource, e.g. a resource that is used to compute the main indicator
    required:
      - referencedGeoresourceId
      - referencedGeoresourceName
      - referencedGeoresourceDescription
    properties:
      referencedGeoresourceId:
        type: string
        description: unique identifier of the referenced georesource
      referencedGeoresourceName:
        type: string
        description: the meaningful name of the referenced georesource
      referencedGeoresourceDescription:
        type: string
        description: a meaningful description of how the referenced georesource is related to the main indicator

  Import_IndicatorPOSTInputType:
    type: "object"
    required:
      - datasetName
      - applicableSpatialUnit
      - applicableTopics
      - metadata
      - allowedRoles
      - processDescription
      - unit
      - creationType
      - defaultClassificationMapping
      - abbreviation
      - isHeadlineIndicator
      - interpretation
      - tags
    properties:
      datasetName:
        type: string
        description: the meaningful name of the indicator
      indicatorType:
        type: string
        description: indicates whether the indicator is a status indicator (values represent the extent of the watched phenomenon for a certain point in time) or a dynamic indicator (values represent the change of extent of the watched phenomenon within a certain period of time)
        enum:
          - STATUS_ABSOLUTE
          - DYNAMIC_ABSOLUTE
          - STATUS_RELATIVE
          - DYNAMIC_RELATIVE
          - STATUS_STANDARDIZED
          - DYNAMIC_STANDARDIZED
      applicableSpatialUnit:
        type: string
        description: identifier/name of the spatial unit level
      applicableTopics:
        type: array
        description: "array of thematic categories for which the dataset is applicable. Note that the used topicName has to be defined under /topics"
        items:
          type: string
      metadata:
        $ref: "#/definitions/CommonMetadataType"
      processDescription:
        type: string
        description: description about how the indicator was computed
      unit:
        type: string
        description: unit of the indicator values
      creationType:
        type: string
        description: indicates if the data is simply inserted (INSERTION), computed by an automated script (COMPUTATION) or automatically aggregated by a script (AGGREGATION)
        enum:
          - INSERTION
          - COMPUTATION
          - AGGREGATION
      abbreviation:
        type: "string"
        description: "abbreviated mark of the indicator"
      interpretation:
        type: "string"
        description: "interpretation of the indicator values"
      isHeadlineIndicator:
        type: boolean
        description: boolean value indicating if the indicator is a headline indicator
        default: false
      tags:
        type: array
        description: list of tag labels for the indicator
        items:
          type: string
      lowestSpatialUnitForComputation:
        type: string
        description: identifier/name of the lowest spatial unit for which the indicator can be computed and thus is available (only necessary for computable indicators)
      defaultClassificationMapping:
        $ref: "#/definitions/DefaultClassificationMappingType"
      allowedRoles:
        type: array
        description: list of role identifiers that have read access rights for this dataset
        items:
          type: string
      refrencesToOtherIndicators:
        type: array
        description: "array of references to other indicators. E.g., if an indicator is defined by combining four other indicators, then the identifiers of those other indicators can be referenced here"
        items:
          type: object
          properties:
            indicatorId:
              type: string
              description: identifier of the referenced indicator
            referenceDescription:
              type: string
              description: short description of how the indicator is referenced to the superior one
      refrencesToGeoresources:
        type: array
        description: "array of references to other georesource datasets. E.g., if an indicator is defined by performing geometric-topological operations, then the identifiers of those required georesources can be referenced here"
        items:
          type: object
          properties:
            georesourceId:
              type: string
              description: identifier of the referenced georesource
            referenceDescription:
              type: string
              description: short description of how the georesource is referenced to the indicator
      dataSource:
        $ref: "#/definitions/ImportDataSourceType"

  Import_IndicatorOverviewType:
    type: object
    required:
      - indicatorName
      - indicatorId
      - unit
      - metadata
      - processDescription
      - creationType
      - applicableSpatialUnits
      - applicableDates
      - applicableTopics
      - ogcServices
      - abbreviation
      - isHeadlineIndicator
      - interpretation
      - tags
    properties:
      indicatorName:
        type: "string"
        description: "name of the indicator"
      indicatorId:
        type: string
        description: unique identifier of this resource
      indicatorType:
        type: string
        description: indicates whether the indicator is a status indicator (values represent the extent of the watched phenomenon for a certain point in time) or a dynamic indicator (values represent the change of extent of the watched phenomenon within a certain period of time)
        enum:
          - STATUS_ABSOLUTE
          - DYNAMIC_ABSOLUTE
          - STATUS_RELATIVE
          - DYNAMIC_RELATIVE
          - STATUS_STANDARDIZED
          - DYNAMIC_STANDARDIZED
      unit:
        type: string
        description: unit of the indicator values
      metadata:
        $ref: "#/definitions/CommonMetadataType"
      processDescription:
        type: string
        description: description about how the indicator was computed
      applicableSpatialUnits:
              type: array
              description: "array of spatial unit levels for which the dataset is applicable"
              items:
                type: string
      applicableDates:
        type: "array"
        description: array of applicable dates (year and month and day as YEAR-MONTH-DAY) according to ISO 8601 (e.g. 2018-01-30)
        items:
          type: string
      applicableTopics:
        type: array
        description: "array of thematic categories for which the dataset is applicable. Note that the used topicName has to be defined under /topics"
        items:
          type: string
      allowedRoles:
        type: array
        description: list of role identifiers that have read access rights for this dataset
        items:
          type: string
      referencedIndicators:
        type: array
        description: list of references to other indicators
        items:
          $ref: "#/definitions/IndicatorReferenceType"
      referencedGeoresources:
        type: array
        description: list of references to georesources
        items:
          $ref: "#/definitions/GeoresourceReferenceType"
      creationType:
        type: string
        description: indicates if the data is simply inserted (INSERTION), computed by an automated script (COMPUTATION) or automatically aggregated by a script (AGGREGATION)
        enum:
          - INSERTION
          - COMPUTATION
          - AGGREGATION
      lowestSpatialUnitForComputation:
        type: string
        description: identifier/name of the lowest spatial unit for which the indicator can be computed and thus is available (only necessary for computable indicators)
      defaultClassificationMapping:
        $ref: "#/definitions/DefaultClassificationMappingType"
      ogcServices:
        type: array
        description: list of available OGC services for that indicator for different spatial units
        items:
          $ref: "#/definitions/OgcServicesType"
      abbreviation:
        type: "string"
        description: "abbreviated mark of the indicator"
      interpretation:
        type: "string"
        description: "interpretation of the indicator values"
      isHeadlineIndicator:
        type: boolean
        description: boolean value indicating if the indicator is a headline indicator
        default: false
      tags:
        type: array
        description: list of tag labels for the indicator
        items:
          type: string

  OgcServicesType:
    type: "object"
    required:
      - wmsUrl
      - wfsUrl
      - defaultStyleName
      - spatialUnit
    properties:
      spatialUnit:
        type: string
        description: the name of the spatial unit
      wmsUrl:
        type: string
        description: the URL of a running WMS instance serving the spatial features of the associated dataset
      wfsUrl:
        type: string
        description: the URL of a running WFS instance serving the spatial features of the associated dataset
      defaultStyleName:
        type: string
        description: the name of the default style (SLD) that is published and applied to the associated dataset

  DefaultClassificationMappingType:
    type: "object"
    required:
      - items
      - colorBrewerSchemeName
    properties:
      colorBrewerSchemeName:
        type: string
        description: "the name of the colorBrewer color scheme jused to define the colors for classification (see project http://colorbrewer2.org/#type=sequential&scheme=BuGn&n=3 for colorSchemes). Set to 'INDIVIDUAL' if colors are set arbitrarily."
      items:
        type: array
        description: "array of classification mapping items. The order of the items corresponds to indicator value intervals from low to high. The number of items represents the number of classes. In combination they represent the default classification and mapping to custom rating of the indicator values"
        items:
          $ref: "#/definitions/DefaultClassificationMappingItemType"

  DefaultClassificationMappingItemType:
    type: "object"
    required:
      - defaultColorAsHex
      - defaultCustomRating
    properties:
      defaultColorAsHex:
        type: string
        description: "the default color for the specified value interval as hex string inclusive leading #, i.e. '#ffffff'"
      defaultCustomRating:
        type: string
        description: "the default custom rating string for the specified value interval, i.e. 'very high'/'very low' or 'good'/'bad'"

  Import_IndicatorPUTInputType:
    type: "object"
    required:
      - applicableSpatialUnit
      - dataSource
    properties:
      defaultClassificationMapping:
        $ref: "#/definitions/DefaultClassificationMappingType"
      applicableSpatialUnit:
        type: string
      dataSource:
        $ref: "#/definitions/ImportDataSourceType"

  ImportDataSourceType:
    type: "object"
    required:
      - type
      - payload
      - idPropertyName
      - namePropertyName
    properties:
      type:
        type: string
        description: "the source format from which geodata or indicator data can be extracted"
        enum:
          - WFS
          - GEOJSON
          - SHAPE
          - GML
          - EXCEL
          - CSV
      format:
        $ref: "#/definitions/FormatType"
      payload:
        $ref: "#/definitions/PayloadType"
      datasetReference:
        $ref: "#/definitions/DatasetReferenceType"
        description: "If the data source configured via sourceFormat and payload has more than one geodata source (e.g. multiple layers, featureTypes, database tables, etc.), the respective name/reference of the target feature dataset must be submitted here"

  FormatType:
    type: "object"
    required:
      - mimeType
    properties:
      mimeType:
        type: string
        description: "The MIME-type of the source format according to https://www.iana.org/assignments/media-types/media-types.xhtml"
      schema:
        type: string
        description: "The schema of the source format (e.g. http://schemas.opengis.net/gml/3.0.0/base/feature.xsd for MIME-type text/xml)"
      encoding:
        type: string
        description: "Encoding procedure or character set used (e.g. raw, base64, or UTF-8)"

  PayloadType:
    type: "object"
    properties:
      inputType:
        type: string
        description: "Specifies the the way the payload content will be provided. Possible values are 'DATA' for providing data inline or 'REFERENCE' to specifiy an URL that references some data"
        enum:
          - DATA
          - REFERENCE
      content:
        type: string
        description: "The content according to the selected sourceFormat (i.e. an URL to a WFS, or Base64 encoded String of a zipped ShapeFile or GeoJSON)"

  DatasetReferenceType:
    type: "object"
    required:
      - type
      - value
    properties:
      type:
        type: string
        description: "Type of the dataset reference. Can be an attribute for tabular data or FeatureType if the underlying datasource is Feature like."
        enum:
          - ATTRIBUTE
          - FEATURE_TYPE
      name:
        type: string
        description: "Name of the attribute that contains a certain value for referencing the target dataset."
      value:
        type: string
        description: "The value that specifies the target dataset to be referenced."

  SpatialUnitPropertyMappingType:
    type: "object"
    required:
      - idProperty
      - nameProperty
    properties:
      idProperty:
        type: string
        description: "The property that contains each feature's unique identifier"
      nameProperty:
        type: string
        description: "The property that contains each feature's unique name"
      validStartDateProperty:
        type: string
        description: "The property that contains information about each feature's period of validity start date (optional, can also be configured globally for all features in POST and PUT requests)"
      validEndDateProperty:
        type: string
        description: "The property that contains information about each feature's period of validity end date - might be null to indicator that feature is most current feature (optional, can also be configured globally for all features in POST and PUT requests)"

  GeoresourcePropertyMappingType:
    type: "object"
    required:
      - datasetNameProperty
    properties:
      datasetNameProperty:
        type: string
        description: "The property that contains each feature's unique identifier"
      name:
        type: string
        description: "The property that contains each feature's unique name"
      validStartDate:
        type: string
        description: "The property that contains information about each feature's period of validity start date (optional, can also be configured globally for all features in POST and PUT requests)"
      validEndDate:
        type: string
        description: "The property that contains information about each feature's period of validity end date - might be null to indicator that feature is most current feature (optional, can also be configured globally for all features in POST and PUT requests)"
  
  IndicatorPropertyMappingType:
    type: "object"
    required:
    properties:
      idProperty:
       # TODO
      spatialReferenceKeyProperty:
        type: string
        description: property that contains the identifier of the spatial feature to which the values shall be applied
      indicatorValueProperty:
        type: string
        description: property that contains the numeric value of the indicator
      timestampProperty:
        type: string
        description: property that contains the timestamp (year, month and date) according to ISO 8601 (e.g. 2018-01-30)